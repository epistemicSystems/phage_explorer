
/* Mobile + small tablet overrides focused on touchability and stacking */
@media (max-width: 900px) {
  :root {
    --text-xs: 12px;
    --text-sm: 14px;
    --text-base: 16px;
  }

  /* Layout: force single-column master/detail with compact header/footer */
  .app-shell {
    grid-template-rows: auto 1fr auto;
  }

  .app-body {
    padding: 12px;
    overflow-x: hidden;
  }

  .panel.two-column {
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .column--list {
    order: 1;
  }

  .column--detail {
    order: 2;
  }

  /* Constrain list height so detail stays visible */
  .column--list .list {
    max-height: 42vh;
    min-height: 180px;
  }

  /* Header: wrap quick actions and keep readable spacing */
  .app-header {
    padding: 10px 14px;
    gap: 8px;
    flex-wrap: wrap;
  }

  .header-right {
    flex-wrap: wrap;
    gap: 8px;
    width: 100%;
    justify-content: flex-start;
  }

  /* Touch targets */
  button,
  .btn,
  [role="button"] {
    min-height: 44px;
    min-width: 44px;
    padding: 9px 14px;
    font-size: 14px;
  }

  /* Badges stay legible but not oversized */
  .badge {
    font-size: 11px;
    padding: 4px 8px;
    min-height: 20px;
  }

  /* Sequence + controls stack vertically with breathing room */
  .detail-viewers {
    grid-template-columns: 1fr;
    gap: 10px;
  }

  .sequence-view {
    min-height: 280px;
  }

  .sequence-view .toolbar button {
    padding: 8px 12px;
    margin: 2px;
  }

  /* 3D view stays visible but not full-height */
  .three-container {
    width: 100%;
    min-height: 240px;
    height: min(360px, 60vh);
  }

  /* Footer keyboard hints are noise on mobile */
  .app-footer .footer-hints {
    display: none;
  }

  /* Prevent horizontal scrollbars from nested panels */
  .panel {
    overflow-x: hidden;
  }
}

/* Phone-only drawer behavior */
@media (max-width: 640px) {
  .column--list.mobile-drawer {
    position: fixed;
    inset: 0;
    z-index: var(--z-modal);
    background: var(--color-background);
    padding: 12px;
    padding-top: calc(12px + env(safe-area-inset-top));
    padding-bottom: calc(12px + env(safe-area-inset-bottom));
    overflow: hidden;
  }

  .column--list.mobile-drawer .list {
    max-height: none;
    min-height: 0;
  }
}

/* Ultra-small devices */
@media (max-width: 540px) {
  .app-header {
    padding: 8px 10px;
  }

  .panel.two-column {
    gap: 8px;
  }

  .column--list .list {
    max-height: 38vh;
  }
}

/* =============================================================================
   WCAG 2.5.5 Touch Target Compliance (44x44px minimum)
   Applies to touch devices (phones, tablets) for accessibility
   ============================================================================= */
@media (hover: none) and (pointer: coarse) {
  /* Base button touch targets */
  button,
  .btn,
  [role="button"],
  [role="tab"],
  [role="menuitem"],
  [role="option"],
  a[href] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Icon buttons - expand hit area without changing visual size */
  .btn-icon,
  .btn.icon-only,
  button[aria-label]:not(.btn-lg) {
    min-height: 44px;
    min-width: 44px;
    padding: 10px;
  }

  /* Small buttons - keep visual appearance but expand hit area */
  .btn-sm {
    min-height: 44px;
    min-width: 44px;
    padding: 8px 14px;
  }

  /* Compact toolbar buttons - expand hit area for touch */
  .btn.compact,
  .toolbar .btn,
  .segmented-control button {
    min-height: 44px;
    min-width: 44px;
    padding: 8px;
  }

  /* List items as touch targets */
  .list-item {
    min-height: 56px;
    padding: 12px 16px;
  }

  /* Badge buttons (when clickable) */
  .badge[role="button"],
  .badge.clickable,
  button.badge {
    min-height: 44px;
    min-width: 44px;
    padding: 10px 14px;
  }

  /* Overlay close buttons */
  .overlay-close,
  .modal-close,
  [aria-label="Close"],
  [aria-label="close"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Checkbox and radio targets */
  input[type="checkbox"],
  input[type="radio"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Select dropdowns */
  select {
    min-height: 44px;
    padding: 10px 12px;
  }

  /* Text inputs - comfortable touch height */
  input[type="text"],
  input[type="search"],
  input[type="number"],
  input[type="email"],
  input[type="url"],
  textarea {
    min-height: 44px;
    padding: 10px 12px;
  }

  /* Tab buttons */
  [role="tab"] {
    min-height: 44px;
    padding: 10px 16px;
  }

  /* View mode segments */
  .view-mode-segment {
    min-height: 44px;
    padding: 10px 14px;
  }

  /* Ensure adequate spacing between adjacent touch targets */
  .badge-row {
    gap: 8px;
  }

  .toolbar {
    gap: 8px;
  }

  .btn + .btn,
  button + button {
    margin-left: 4px;
  }
}
