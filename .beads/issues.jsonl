{"id":"phage_explorer-022","title":"Layer 1: GC Skew Replication Origin Overlay [G key]","description":"Layer 1 overlay (G key): Display cumulative GC skew sparkline with origin (minimum) and terminus (maximum) markers. O(n) scan, pure TypeScript. Reveals replication mode (theta vs rolling circle). Pedagogical value: 9/10. Priority: P0 - fundamental biology, low effort, high impact.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:10:40.281601-05:00","updated_at":"2025-12-06T23:21:50.288895-05:00","dependencies":[{"issue_id":"phage_explorer-022","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:10:40.28282-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0k6","title":"Layer 3: Temporal Evolution Replay","description":"Layer 3 Simulation: Animate mutation accumulation across phage isolates/timepoints. Dated phylogeny, ancestral reconstruction, time scrubber. See substitution rate and Ne dynamics. Requires multiple dated isolate sequences.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:17:53.647084-05:00","updated_at":"2025-12-06T23:23:32.160715-05:00","dependencies":[{"issue_id":"phage_explorer-0k6","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:17:53.649358-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0qa","title":"Layer 2: Self-Homology Dot Plot","description":"Layer 2 Full-screen: Self-homology dot plot. Diagonal=identity, parallel lines=direct repeats, perpendicular=inverted repeats (hairpins). Gold standard for repeat analysis. Braille rendering.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:14:47.63539-05:00","updated_at":"2025-12-06T23:22:45.535069-05:00","dependencies":[{"issue_id":"phage_explorer-0qa","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:14:47.636771-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0vs","title":"Layer 2: Virion Stability Predictor","description":"Layer 2 Panel: Predict virion stability (temperature, pH, ionic strength) from capsid protein properties. Critical for therapy formulation. Empirical rules based on cysteines, charge, hydrophobicity.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:15:45.425383-05:00","updated_at":"2025-12-06T23:23:07.347231-05:00","dependencies":[{"issue_id":"phage_explorer-0vs","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:15:45.425932-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-1eu","title":"Layer 2: Hilbert Curve Genome Atlas","description":"Layer 2 Full-screen: Map genome onto 2D square via Hilbert space-filling curve. Preserves locality - nearby positions stay nearby. View entire genome without scrolling. Color by GC, gene density, etc.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:14:47.310035-05:00","updated_at":"2025-12-06T23:22:44.59771-05:00","dependencies":[{"issue_id":"phage_explorer-1eu","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:14:47.311482-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-2g5","title":"Foundation: Overlay System Architecture","description":"Create OverlayManager in Zustand state store with Overlay interface (id, render, height, position). Enables Layer 1 quick toggles (G, X, B, P, R keys) and Layer 2+ visual augmentations. Precompute data on phage selection. Max 3 simultaneous overlays. THIS IS THE CRITICAL FOUNDATION for all 31 features.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-06T23:08:21.93375-05:00","updated_at":"2025-12-06T23:21:29.111126-05:00"}
{"id":"phage_explorer-441","title":"Layer 3: Packaging Motor Pressure Gauge","description":"Layer 3 Overlay: Visualize packaging pressure (60 atm!) as you scroll through genome. Force increases exponentially with fill fraction. Bending + electrostatic energy model. Physics in genomics tool = unique.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:17:53.887447-05:00","updated_at":"2025-12-06T23:23:33.4648-05:00","dependencies":[{"issue_id":"phage_explorer-441","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:17:53.888443-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-441","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:40:02.457611-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-46l","title":"Layer 3: Lysogeny Decision Circuit Simulator","description":"Layer 3 Simulation: ODE model of Lambda lysis-lysogeny switch. CI and Cro mutual repression creates bistability. Interactive phase portrait with MOI and UV damage parameters. Runge-Kutta integrator. ICONIC biology. Pedagogical: 10/10.","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-06T23:17:07.0583-05:00","updated_at":"2025-12-06T23:23:09.647554-05:00","dependencies":[{"issue_id":"phage_explorer-46l","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:17:07.060887-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-474","title":"Advanced: RNA Structure \u0026 Packaging Signal Explorer","description":"Advanced Feature: Map RNA secondary structure (ΔG) and packaging hairpins. ViennaRNA RNAfold + Infernal for conserved motifs. Essential for RNA phages and DNA phage pac signals. Requires external tools.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:21:06.03497-05:00","updated_at":"2025-12-06T23:23:56.398306-05:00","dependencies":[{"issue_id":"phage_explorer-474","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:21:06.039512-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4ee","title":"Layer 3: Ribosome Traffic Jam Simulator","description":"Layer 3 Simulation: Particle simulation of translation. Ribosomes move along mRNA, slow at rare codons, create traffic jams. Visualizes WHY codon optimization matters. Discrete event simulation. Extremely novel - a MOVIE not a static plot.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:17:07.375278-05:00","updated_at":"2025-12-06T23:23:10.568893-05:00","dependencies":[{"issue_id":"phage_explorer-4ee","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:17:07.376015-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4nt","title":"Layer 2: Information-Theoretic Sequence Anomaly Scanner","description":"Layer 2 Analysis: Full-panel KL divergence + compression analysis to detect anomalous regions. Classifies as potential HGT, repetitive, or regulatory. Discovery-oriented - finds what you weren't looking for. Extends X overlay.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:11:46.311139-05:00","updated_at":"2025-12-06T23:22:18.436181-05:00","dependencies":[{"issue_id":"phage_explorer-4nt","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:11:46.312542-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-4nt","depends_on_id":"phage_explorer-wtf","type":"blocks","created_at":"2025-12-06T23:11:46.31378-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4pf","title":"Layer 2: Non-B DNA Structure Map (G-Quadruplexes, Z-DNA)","description":"Layer 2 Analysis: Detect G-quadruplexes and Z-DNA using regex patterns. G4s regulate promoters; Z-DNA triggers immune response. These alternative conformations are regulatory switches often missed. Priority: P2.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:11:46.636728-05:00","updated_at":"2025-12-06T23:22:19.587109-05:00","dependencies":[{"issue_id":"phage_explorer-4pf","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:11:46.637573-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4ty","title":"Advanced: Phage Cocktail Compatibility Matrix","description":"Advanced Feature: Optimize phage cocktails - predict interference, maximize host coverage, avoid redundancy. Features: receptor usage, SIE genes, lysis timing, spacer overlap. ILP/greedy optimization. Therapy design tool.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:20:17.845538-05:00","updated_at":"2025-12-06T23:23:55.355333-05:00","dependencies":[{"issue_id":"phage_explorer-4ty","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:20:17.848483-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4wz","title":"Layer 2: Structural Variant Detector (Deletions, Inversions, Translocations)","description":"Layer 2 Analysis: Detect structural variants between phages - deletions, inversions, duplications, translocations. Alignment block analysis. Essential for understanding phage mosaicism and recombination.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:13:38.363422-05:00","updated_at":"2025-12-06T23:22:40.578129-05:00","dependencies":[{"issue_id":"phage_explorer-4wz","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:13:38.365486-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-4wz","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:39:31.501831-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-54g","title":"Foundation: Menu Infrastructure (Analysis Menu \u0026 Simulation Hub)","description":"Create reusable ModalMenu component (Ink) for Analysis Menu (A key) and Simulation Hub (Shift+S). Implement MenuItem interface with icons, shortcuts, actions. Categorized navigation with fuzzy search. ESC always exits.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-06T23:08:58.84906-05:00","updated_at":"2025-12-06T23:21:30.898104-05:00"}
{"id":"phage_explorer-5ab","title":"Layer 1: Repeat/Palindrome Markers Overlay [R key]","description":"Layer 1 overlay (R key): Display repeat and palindrome markers - inverted repeats (hairpins), direct repeats (duplications). Self-comparison via sliding window. Identifies terminators, recombination sites. Priority: P2.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:10:41.455889-05:00","updated_at":"2025-12-06T23:21:54.549629-05:00","dependencies":[{"issue_id":"phage_explorer-5ab","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:10:41.456574-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5b5","title":"Foundation: Advanced UI State Management","description":"## Advanced UI State Management\n\nZustand state structure supporting overlay/modal/simulation/command systems.\n\n### AdvancedUIState Interface\n```typescript\ninterface AdvancedUIState {\n  // Overlay system\n  activeOverlays: Set\u003cOverlayId\u003e;\n  overlayConfigs: Map\u003cOverlayId, OverlayConfig\u003e;\n\n  // Modal system\n  activeModal: ModalId | null;\n  modalHistory: ModalId[];  // For back navigation\n\n  // Simulation state\n  activeSimulation: SimulationId | null;\n  simulationState: SimState | null;\n  simulationSpeed: number;\n  simulationPaused: boolean;\n\n  // Command palette\n  commandPaletteOpen: boolean;\n  commandSearch: string;\n  commandResults: CommandMatch[];\n  selectedCommandIndex: number;\n\n  // Computed data cache\n  analysisCache: Map\u003cstring, AnalysisResult\u003e;\n}\n```\n\n### Key Principle\nPrecompute on phage selection, not on feature activation. When user selects a phage, background-compute: GC skew, complexity, bendability, promoter predictions. Makes overlays feel instant when toggled.\n\nDepends on: All 4 foundation systems (Overlay, Menu, Command Palette, Simulation)","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-06T23:35:36.359231-05:00","updated_at":"2025-12-06T23:37:50.1692-05:00","dependencies":[{"issue_id":"phage_explorer-5b5","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:35:36.360877-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-5b5","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:35:36.361949-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-5b5","depends_on_id":"phage_explorer-8lh","type":"blocks","created_at":"2025-12-06T23:35:36.362786-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-5b5","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:35:36.363707-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-66a","title":"Layer 2: Comparative Synteny Browser","description":"Layer 2 Analysis: Multi-track visualization of gene order conservation. Ortholog clustering + synteny block detection. Reveals modular boundaries and evolutionary relationships beyond sequence similarity.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:13:38.661192-05:00","updated_at":"2025-12-06T23:22:41.584582-05:00","dependencies":[{"issue_id":"phage_explorer-66a","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:13:38.661967-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-6sn","title":"Advanced: Recombination Hotspot Radar","description":"## Recombination Hotspot Radar (Phylogenetic Mosaic Atlas)\n\n### Concept\nPhage genomes are not trees — they're TANGLES. Rampant horizontal gene transfer means a single phage is a mosaic assembled from potentially dozens of ancestral lineages. This feature:\n1. Detects mosaic ancestry along genomes\n2. Flags recombination breakpoints with confidence scores\n3. Colors each gene by its phylogenetic origin\n4. Reveals the true chimeric nature of phage evolution\n\n### Mathematical Foundations\n\n**Per-gene phylogenetics:**\n- Multiple sequence alignment per ortholog cluster\n- Distance matrix: D[i,j] = 1 - sequence_identity(i, j)\n- Tree construction via Neighbor-Joining: O(n³)\n- Optional: ML refinement with Jukes-Cantor/GTR model\n\n**Recombination breakpoint detection (PHI test):**\n- Compute pairwise incompatibility matrix\n- I(i,j) = 1 if sites i,j violate four-gamete test\n- PHI statistic = mean(I(i,j)) for nearby site pairs\n- Significance via permutation (P \u003c 0.05 = recombination)\n\n**Gene flow quantification:**\n- Robinson-Foulds distance: gene tree vs species tree\n- Low RF = vertical inheritance (gene follows species)\n- High RF = horizontal transfer (gene has different history)\n- Transfer direction inferred from branch length asymmetry\n\n**Phylogenetic HMM for mosaic detection:**\n- States = {Donor_1, Donor_2, ..., Donor_k} (ancestral lineages)\n- Emissions = local sequence similarity to each donor\n- Transitions = low probability (encourage few switches)\n- Viterbi decoding gives most likely ancestry path\n- Posterior decoding gives per-position confidence\n\n### Implementation (Rust/WASM)\n- neighbor_joining(dist) → NewickTree\n- phi_test(alignment, window) → PhiResult with p-value\n- edit_distance_bounded() for efficient alignment\n- Forward-backward algorithm for HMM posteriors\n\n### TypeScript Orchestration\n1. Cluster orthologs across phages\n2. Build per-gene trees (parallel in WASM)\n3. Build species tree from concatenated core genes\n4. Detect recombination breakpoints\n5. Assign gene origins by comparing to species tree\n6. Infer gene flow events\n\n### TUI Visualization\n- Animated mosaic sweep: genes colored by ancestral lineage\n- Breakpoint annotations with confidence scores\n- Gene tree discordance table (RF distance per gene)\n- Sankey-style gene flow diagram (ASCII arcs)\n- Animated HMM walk showing posterior probabilities\n\n### Pedagogical Value: 10/10\nTeaches HGT (the defining feature of phage evolution), phylogenetic trees, mosaic evolution, HMMs, four-gamete test (classic population genetics).\n\n### Dependencies\n- phage_explorer-54g (Menu Infrastructure)\n- phage_explorer-wae (Latent Space for cluster definitions)","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:19:11.092247-05:00","updated_at":"2025-12-06T23:31:23.651272-05:00","dependencies":[{"issue_id":"phage_explorer-6sn","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:19:11.093779-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-8lh","title":"Foundation: Command Palette System","description":"Create fuzzy-search command palette (: or Ctrl+P) for instant access to any feature. CommandRegistry singleton where all features register with name, keywords, action. Power users can access any feature in 3-4 keystrokes.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-06T23:08:59.44721-05:00","updated_at":"2025-12-06T23:21:31.718443-05:00"}
{"id":"phage_explorer-92s","title":"Foundation: Progressive Disclosure \u0026 User Journey","description":"## Progressive Disclosure \u0026 User Journey\n\nStrategy for exposing features based on user expertise level.\n\n### New User Journey (First 5 minutes)\n- Only Layer 0 (12 sacred controls)\n- Help overlay shows essential controls only\n- Navigate phages, scroll sequences, toggle DNA/AA\n\n### Intermediate User (First hour)\n- Layer 0 + Layer 1 overlays\n- Discover overlays via help\n- Try diff mode, explore 3D model\n- Help now shows 'Advanced: press A for more...'\n\n### Power User\n- Full Layer 0-4 access\n- Uses command palette (: or Ctrl+P)\n- Runs simulations, does comparative analysis\n- Discovers features through exploration\n\n### Key Insight\nEvery feature reachable in ≤3 keypresses but invisible until needed.\n\nDepends on: Help System (phage_explorer-ofm), UI Design System (phage_explorer-dx3)","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:35:35.931114-05:00","updated_at":"2025-12-06T23:37:48.880834-05:00","dependencies":[{"issue_id":"phage_explorer-92s","depends_on_id":"phage_explorer-ofm","type":"blocks","created_at":"2025-12-06T23:39:01.879645-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-92s","depends_on_id":"phage_explorer-dx3","type":"blocks","created_at":"2025-12-06T23:39:02.988977-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-be3","title":"Advanced: Phage-Defense Arms Race Scanner","description":"Advanced Feature: Score phage anti-defense payloads vs host defenses. HMMs for anti-CRISPRs, methyltransferases, anti-Abi. Offense/defense balance index. Actionable for therapy cocktail design. Arms-race ecology visible.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:20:17.595944-05:00","updated_at":"2025-12-06T23:23:54.347863-05:00","dependencies":[{"issue_id":"phage_explorer-be3","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:20:17.596973-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bp9","title":"Advanced: Codon Economy \u0026 tRNA Adaptation Dashboard","description":"## Codon Economy \u0026 tRNA Adaptation Dashboard\n\n### Concept\nQuantify translation efficiency per gene vs host tRNA pool; surface codon-pair bias hotspots. Phages must balance:\n- Fast translation (use common codons)\n- Regulatory pauses (use rare codons strategically)\n- Host adaptation (optimize for specific host)\n\nThis feature merges host-specific translational constraints with phage engineering hints.\n\n### Key Metrics\n\n**Codon Adaptation Index (CAI):**\n- Match to highly expressed host genes\n- CAI = geometric mean of relative adaptiveness per codon\n- Range: 0-1, higher = better adapted\n\n**tRNA Adaptation Index (tAI):**\n- Match to host tRNA abundance (gene copy numbers)\n- More direct measure of translation speed\n- Requires tRNA gene copy number data per host\n\n**Codon Pair Bias (CPB):**\n- Some codon pairs are disfavored (ribosome stalling)\n- CPB = log(observed/expected) for each pair\n- \"Redlines\" = highly disfavored pairs (|CPB| \u003e 1.5)\n\n### Implementation\n\nPull tRNA gene copy numbers from GtRNAdb:\nconst HOST_TRNA_WEIGHTS: Map\u003cstring, Map\u003cstring, number\u003e\u003e = loadTRNAWeights();\n\nCompute metrics per gene:\n- computeCAI(gene: string, hostId: string) → number\n- computeTAI(gene: string, hostId: string) → number\n- computeCodonPairBias(gene: string) → CodonPairResult[]\n\nHeavy loops can be moved to Rust+WASM.\nStore per-gene metrics in SQLite; recompute on host switch.\n\n### TUI Visualization\n\n**Gene map heatmap (colored by CAI):**\n═══[cI]════[N]════[cro]════[O]════[P]════[Q]════[gpJ]═══\n   ▓▓▓    ███    ▓▓▓     ███    ███    ██░    ░░░░░░░\n  0.65    0.89   0.72    0.85   0.88   0.78    0.45\n\nLegend: ░ Low CAI (\u003c0.5)  ▓ Medium  █ High (\u003e0.8)\n\n**Codon Pair \"Redlines\" view (press 'c'):**\nShow disfavored codon pairs along sequence grid\nPosition 234: GGA-CGA (bias -2.1) ← ribosome stall site?\nPosition 567: AGG-CGA (bias -2.4) ← rare codon cluster\n\n**Host comparison table:**\n              E.coli K12  Salmonella  Shigella\nOverall CAI:   0.72        0.68       0.71\nTail fiber:    0.45        0.61       0.48  ← adapted to Salmonella?\n\n### Engineering Hints\n- Low CAI genes = candidates for codon optimization\n- Rare codon clusters = potential regulatory pauses\n- Different CAI across hosts = host adaptation evidence\n\n### Pedagogical Value: 9/10\nTeaches codon bias biology, translation efficiency, host adaptation, genetic code degeneracy, expression tuning.\n\n### Data Requirements\n- tRNA gene copy numbers per host species (from GtRNAdb)\n- Codon usage tables per host\n- ~10MB additional data\n\n### Dependencies\n- phage_explorer-54g (Menu Infrastructure)","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:19:11.419742-05:00","updated_at":"2025-12-06T23:32:51.611507-05:00","dependencies":[{"issue_id":"phage_explorer-bp9","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:19:11.421645-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-c3j","title":"Layer 2: Genomic Signature PCA (Tetranucleotide Frequency)","description":"Layer 2 Full-screen: Project phages into 2D scatter via tetranucleotide (4-mer) frequency PCA. Alignment-free phylogeny - clusters phages by family/host without gene homology. 256-dimensional reduction.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:15:45.104077-05:00","updated_at":"2025-12-06T23:23:06.252895-05:00","dependencies":[{"issue_id":"phage_explorer-c3j","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:15:45.105973-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-c95","title":"Layer 2: Virtual Agarose Gel Electrophoresis","description":"Layer 2 Panel: Simulate restriction enzyme digestion and visualize bands on virtual agarose gel. Log-linear migration. Essential for experimental planning - predict before doing experiment.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:15:45.679687-05:00","updated_at":"2025-12-06T23:23:08.69649-05:00","dependencies":[{"issue_id":"phage_explorer-c95","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:15:45.680152-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-cgd","title":"Layer 1: Promoter/RBS Strength Overlay [P key]","description":"Layer 1 overlay (P key): Display predicted promoter (-35/-10 boxes) and RBS (Shine-Dalgarno) strength annotations. Pattern matching against consensus sequences. Understanding gene expression timing. Priority: P2.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:10:41.106532-05:00","updated_at":"2025-12-06T23:21:53.509966-05:00","dependencies":[{"issue_id":"phage_explorer-cgd","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:10:41.108052-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-cgh","title":"Layer 3: Plaque Growth Cellular Automata","description":"Layer 3 Simulation: 2D cellular automaton of phage plaque growth. Parameters: diffusivity, latent period, burst size. Connects genotype to phenotype. Predicts plaque morphology (clear vs turbid). A sim-game inside the tool.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:17:07.628557-05:00","updated_at":"2025-12-06T23:23:11.719727-05:00","dependencies":[{"issue_id":"phage_explorer-cgh","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:17:07.629569-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-dx3","title":"Foundation: UI Design System \u0026 Visual Language","description":"## UI Design System \u0026 Visual Language\n\nEstablishes coherent visual language across all 31 features to maintain consistency.\n\n### Color Semantics\n- Green (#22c55e): Good, conserved, stable, similar\n- Yellow (#eab308): Caution, moderate, neutral\n- Red (#ef4444): Warning, divergent, unstable, different\n- Blue (#3b82f6): Informational, cool metrics\n- Purple (#a855f7): Special, unique, notable\n- Gray (#6b7280): Inactive, background, reference\n\n### Graph/Sparkline Standards\n- Height: 3-5 character rows for overlays\n- Width: Full terminal width\n- Scale: Auto-normalize, show min/max in labels\n- Style: Braille dots for high resolution\n\n### Panel/Modal Standards\n- Border: Single line box drawing\n- Header: Bold, centered, with close hint\n- Padding: 1 character on all sides\n- Max width: 80 characters (or terminal width - 4)\n\nThis is the foundational design system that all features must follow.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-06T23:35:34.98277-05:00","updated_at":"2025-12-06T23:37:44.812898-05:00"}
{"id":"phage_explorer-fno","title":"Layer 2: Chaos Game Representation (CGR) Fractal Fingerprints","description":"Layer 2 Full-screen: Chaos Game Representation - transform 1D sequence to 2D fractal. Each genome = unique fingerprint. Visual k-mer frequency analysis. Braille character rendering. Novelty: HIGH. Wow factor: 10/10.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:14:47.023731-05:00","updated_at":"2025-12-06T23:22:43.710116-05:00","dependencies":[{"issue_id":"phage_explorer-fno","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:14:47.025541-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-kul","title":"Layer 2: Sequence Logo Generator","description":"Layer 2 Analysis: Generate information-theoretic sequence logos from alignments. Height=conservation (bits), stack=letter frequencies. Standard for motif visualization. Requires alignment input.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:12:45.391548-05:00","updated_at":"2025-12-06T23:22:20.454116-05:00","dependencies":[{"issue_id":"phage_explorer-kul","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:12:45.393178-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ofm","title":"Foundation: Help System Redesign (Contextual Layered Help)","description":"## Help System Redesign (Contextual Layered Help)\n\nReplace single help overlay with contextual, layered help system.\n\n### New Help Layout\n- Two-column layout: Navigation/View Controls\n- Overlays section (G/X/B/P/R toggles)\n- Search section\n- Advanced section (A menu, Shift+S hub, : palette)\n\n### Progressive Disclosure\n- Press ? once: Essential controls only\n- Press ? twice: Detailed docs with feature explanations\n- Context-sensitive: Show relevant shortcuts based on current view\n\n### Features\n- Each overlay explained\n- Each analysis tool described\n- Keyboard shortcut cheatsheet\n- ESC always exits\n\nDepends on: UI Design System (phage_explorer-dx3)","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:35:35.397685-05:00","updated_at":"2025-12-06T23:37:46.208162-05:00","dependencies":[{"issue_id":"phage_explorer-ofm","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:35:35.399184-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-ofm","depends_on_id":"phage_explorer-dx3","type":"blocks","created_at":"2025-12-06T23:39:00.284879-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ojb","title":"Foundation: Simulation Framework","description":"Create common infrastructure for 5 interactive simulations: Lysogeny Circuit, Ribosome Traffic, Plaque Automata, Evolution Replay, Packaging Motor. Implement Simulation interface with init/step/render lifecycle. Common controls: Space=pause, R=reset, arrows=speed.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-06T23:08:59.749642-05:00","updated_at":"2025-12-06T23:21:32.802734-05:00"}
{"id":"phage_explorer-oqh","title":"Layer 2: Selection Pressure Chromosome Painter (dN/dS Landscape)","description":"Layer 2 Analysis: Compute dN/dS (omega) across genes, paint chromosome by selection pressure. Blue=purifying (essential), Red=positive (arms race), Gray=neutral. Nei-Gojobori method with JC correction. Requires comparison phage. Pedagogical: 10/10.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:11:46.057601-05:00","updated_at":"2025-12-06T23:22:16.15258-05:00","dependencies":[{"issue_id":"phage_explorer-oqh","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:11:46.060136-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-oqh","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:39:30.270014-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-owy","title":"Layer 2: Host Range Predictor (CRISPR Spacer Matching)","description":"## Host Range Predictor via CRISPR/Spacer Matching (Immunity Landscape)\n\n### Concept\nCRISPR spacers are MOLECULAR FOSSILS OF PAST INFECTIONS — bacterial memory of phage encounters. The global collection represents a map of phage-host evolutionary warfare. This feature:\n1. **Predict immune hosts**: Which bacteria have defenses against this phage?\n2. **Find immunity hotspots**: Which phage regions are most commonly targeted?\n3. **Identify vulnerable regions**: Sequences rarely targeted = conserved essentials\n4. **Assess therapeutic compatibility**: Will the target bacterium resist this phage?\n\n### Mathematical Foundations\n\n**Approximate string matching:**\nCRISPR systems tolerate mismatches (typically ≤3) and still provide immunity.\nMatch if: edit_distance(spacer, target_region) ≤ 3\nEfficiency: k-mer seeding (k=10-12) + verification with full edit distance\n\n**Statistical significance (E-value):**\np_match = (1/4)^k × genome_length\nE-value = database_size × query_length × p_match\nSignificant match if E-value \u003c 0.01\n\n**PAM verification:**\n- Cas9 (Type II): NGG at 3' end of protospacer\n- Cas12 (Type V): TTTV at 5' end\n- Type I systems: Various PAMs (AAG, etc.)\nPAM score = 1.0 (perfect), 0.5 (1 mismatch), 0 (no PAM)\n\n**Phylogenetic breadth score:**\nBreadth = number of distinct host genera with immunity\nHigh breadth = phage encountered across diverse bacteria\nLow breadth = host-specific targeting\n\n**Immunity half-life modeling:**\nSpacer age ∝ divergence from phage sequence\nEstimate acquisition time from mutation rate\n\n### Implementation (Rust/WASM)\n\nSpacerIndex struct with:\n- kmer_to_spacers: HashMap\u003cu64, Vec\u003cSpacerId\u003e\u003e\n- add_spacer(spacer: SpacerEntry)\n- find_matches(query, max_mismatches) → Vec\u003cSpacerMatch\u003e\n\nedit_distance_bounded(a, b, max) → Option\u003cusize\u003e\n  Early termination when min_val \u003e max for efficiency\n\nTypeScript orchestration:\n- Load pre-built spacer index\n- Scan genome in 40bp windows (typical spacer length)\n- Verify PAM for each match\n- Compute E-value significance\n- Build immunity landscape\n\n### Data Sources (~50MB compressed)\n- CRISPRdb: ~200,000 spacers from complete genomes\n- CRISPRCasdb: Larger, includes metagenomic data\n- IMG/VR: Viral metagenome spacers\n\n### TUI Visualization\n\n**Immunity Landscape Navigator:**\n- Density track along genome (▓ hotspot, ░ sparse)\n- Vulnerable regions highlighted (rarely targeted = conserved)\n- Host distribution bar chart by genus\n- Phylogenetic breadth score\n\n**Therapeutic Compatibility Matrix:**\n┌─────────────────┬────────────┬─────────────────────┬──────────┐\n│ Strain          │ Resistance │ CRISPR Evidence     │ Predict  │\n├─────────────────┼────────────┼─────────────────────┼──────────┤\n│ E. coli MG1655  │ LOW        │ 1 spacer (3 mm)     │ ✓ Use    │\n│ E. coli O157:H7 │ HIGH       │ 4 spacers (0-1 mm)  │ ✗ Avoid  │\n└─────────────────┴────────────┴─────────────────────┴──────────┘\n\n**Detailed spacer alignment view:**\n- Show phage vs spacer alignment with mismatches marked\n- PAM verification status\n- Host taxonomy, Cas type, E-value\n\n### Pedagogical Value: 10/10\nTeaches CRISPR-Cas biology (adaptive immunity), approximate string matching (edit distance, k-mer indexing), host-parasite coevolution (molecular arms race), therapeutic considerations (why some phages fail), database design (efficient indexing).\n\n### No other tool integrates CRISPR databases with a genome browser!","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:12:45.734-05:00","updated_at":"2025-12-06T23:32:23.591741-05:00","dependencies":[{"issue_id":"phage_explorer-owy","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:12:45.735205-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-owy","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:39:32.636107-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qlu","title":"Layer 1: DNA Bendability/Curvature Overlay [B key]","description":"Layer 1 overlay (B key): Display DNA bendability/curvature track using dinucleotide wedge angle tables (Trifonov model). High peaks = flexible regions (packaging signals). Teaches DNA biophysics. Priority: P2.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:10:40.824309-05:00","updated_at":"2025-12-06T23:21:52.376547-05:00","dependencies":[{"issue_id":"phage_explorer-qlu","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:10:40.825179-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-t9j","title":"Advanced: Structural Epitope Clash Map","description":"## Structural Epitope Clash Map (Tail Fiber Host Range Analyzer)\n\n### Concept\nThe tail fiber is the phage's MOLECULAR KEY — its receptor-binding domain (RBD) determines host specificity. This feature combines:\n1. **Structural analysis**: ΔΔG alanine scans and electrostatics on predicted structures\n2. **Modular domain detection**: Identify N-anchor, shaft, and hypervariable RBD regions\n3. **Entropy-based variability mapping**: Find conserved vs rapidly-evolving positions\n4. **Host range prediction**: Infer likely hosts from RBD sequence features\n\n### Mathematical Foundations\n\n**Shannon entropy for per-position variability:**\nH(i) = -Σ p(a) × log₂(p(a)) for each alignment position\n- H(i) = 0: Perfectly conserved (functional constraint)\n- H(i) = 4.3: Maximum entropy (20 AA, no constraint)\nEntropy profile reveals low entropy in anchor/shaft (structural), high in RBD (host-range variability)\n\n**Domain boundary detection:**\nTail fibers have conserved modular structure: [N-anchor] — [Shaft repeats] — [RBD]\nDetect via:\n- Entropy gradient peaks (sudden variability change)\n- Hydropathy profile transitions\n- Secondary structure predictions (α-helix shaft → β-sheet RBD)\n- Recombination breakpoint detection\n\n**Structural stability (ΔΔG):**\nΔΔG = ΔG(wild-type) - ΔG(alanine mutant)\n- High ΔΔG = structurally important (core)\n- Low ΔΔG = surface-exposed, tolerant to mutation\n- Negative ΔΔG = destabilizing, likely under selection\n\n**Host range prediction features:**\nFor ML model: k-mer frequencies (k=3,4,5), AA composition, predicted secondary structure, isoelectric point, molecular weight, specific motifs (carbohydrate-binding, Ig-like folds)\n\n### Implementation\n- entropyProfile(alignment) → Float64Array of per-position entropy\n- detectDomainBoundaries(entropy, hydropathy, secondaryStructure) → DomainBoundary[]\n- predictHostRange(rbdSequence, knownRBDs) → HostPrediction[] with confidence\n- analyzeStructuralEpitopes(pdbId, sequence) → StructuralRisk[] (ΔΔG, surface area, charge)\n\n### TUI Visualization (Multi-Layer)\n- Domain structure bar: N-anchor | Shaft | RBD with conservation coloring\n- Entropy profile sparkline (low in anchor, high in RBD)\n- Structural risk profile (ΔΔG instability)\n- Host range prediction table with confidence bars\n- Chimera suggestion: \"Swap RBD (aa 850-1132) with P22 gpJ → Predicted new host: Salmonella\"\n- 3D ASCII model with epitope highlighting (charge/risk mode toggle)\n\n### Pedagogical Value: 9/10\nTeaches receptor-ligand biology, protein modularity, information theory (Shannon entropy), structural biology (surface exposure, electrostatics), evolution of specificity (arms race in molecular detail).\n\n### External Dependencies\n- AlphaFold DB or ESMFold for structure prediction\n- FoldX (or ML surrogate) for ΔΔG calculations\n- APBS for electrostatics\n\n### Priority: P4 (highest complexity)","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-06T23:21:06.440127-05:00","updated_at":"2025-12-06T23:31:50.332681-05:00","dependencies":[{"issue_id":"phage_explorer-t9j","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:21:06.441895-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ug4","title":"Layer 2: Auxiliary Metabolic Gene (AMG) Pathway Mapper","description":"Layer 2 Analysis: Map Auxiliary Metabolic Genes (AMGs) onto KEGG pathway diagrams. Phages hijack host metabolism (photosynthesis, nucleotide synthesis). Hot research topic - AMGs affect global biogeochemical cycles.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:12:45.993704-05:00","updated_at":"2025-12-06T23:22:22.702067-05:00","dependencies":[{"issue_id":"phage_explorer-ug4","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:12:45.995081-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ujh","title":"Advanced: Protein Domain Chord Plot","description":"Advanced Feature: ASCII chord diagram showing shared protein domains across phages. HMMER/Pfam domain detection. Interactive filter by domain family. Domain-level modularity view. Unique in TUI.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:20:17.342284-05:00","updated_at":"2025-12-06T23:23:37.271245-05:00","dependencies":[{"issue_id":"phage_explorer-ujh","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:20:17.344679-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-w71","title":"Layer 2: Prophage Excision Precision Mapper","description":"Layer 2 Analysis: Predict exact attL/attR sites for temperate phages. Find integrase, search for imperfect direct repeats at boundaries. Model excision product. Essential for temperate phage biology.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:13:38.973351-05:00","updated_at":"2025-12-06T23:22:42.804123-05:00","dependencies":[{"issue_id":"phage_explorer-w71","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:13:38.974873-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wae","title":"Advanced: Pan-Phage Latent Space Atlas","description":"## Pan-Phage Latent Space Atlas (Protein Embedding Galaxy)\n\n### Concept\nLearn a continuous manifold of phage genomes and proteins to expose evolutionary neighborhoods, functional clusters, and modular swaps. Traditional function prediction via BLAST fails for ~50% of phage genes (\"viral dark matter\"). Modern protein language models (ESM-2, ProtTrans) learn evolutionary and functional information, producing embeddings where proximity = functional similarity even without sequence homology.\n\n### Dual-Level Embeddings\n1. **Genome-level**: VAE with dual encoder — (a) k-mer CNN/Transformer over DNA; (b) gene-order graph via Graph Attention Networks (PyTorch + torch-geometric)\n2. **Protein-level**: ESM-2 embeddings (1280-dim vectors) capturing evolutionary context, secondary structure, functional domains\n\n### Implementation Options\n- **Full ML**: Train VAE in PyTorch, export embeddings, cache in SQLite\n- **Lightweight**: Pre-compute ESM-2 embeddings during database build, store in protein_embeddings table\n- **Fallback offline**: k-mer frequencies + physico-chemical descriptors (no ML)\n\n### Database Schema\nCREATE TABLE protein_embeddings (\n  protein_id INTEGER PRIMARY KEY,\n  phage_id INTEGER NOT NULL,\n  gene_name TEXT,\n  embedding BLOB,     -- Float32Array (1280 dims for ESM-2)\n  umap_x REAL,        -- Pre-computed 2D projection\n  umap_y REAL,\n  cluster_id INTEGER, -- HDBSCAN cluster assignment\n  novelty_score REAL  -- Distance to nearest known-function cluster\n);\n\n### Key Algorithms\n- UMAP: nNeighbors=15, minDist=0.1, metric='cosine'\n- HDBSCAN: density-based clustering, no need to specify k\n- Hungarian algorithm for optimal protein matching between phages\n- Outliers (label=-1) are potentially novel functions\n\n### TUI Visualization: \"Galaxy\"\n- 2D scatter plot with phage proteins as points\n- Symbols by source phage (∴ Lambda, ○ T4, ⊙ T7)\n- Clusters labeled by function (Tail fibers, Lysins, Capsid, etc.)\n- Isolated points = UNKNOWN (novel?)\n- Cluster detail view: Show all proteins in cluster with confidence scores\n\n### Pedagogical Value: 9/10\nTeaches manifold learning, protein language models, HDBSCAN vs k-means, functional inference via \"guilt by association\", viral dark matter challenge.\n\n### Dependencies\n- phage_explorer-2g5 (Overlay System)\n- phage_explorer-54g (Menu Infrastructure)\n\n### Data Requirements\nPrecomputed embeddings (~1-5GB), WASM-compiled inference (~10MB optional)","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-06T23:19:10.733099-05:00","updated_at":"2025-12-06T23:30:58.074292-05:00","dependencies":[{"issue_id":"phage_explorer-wae","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:19:10.736323-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-wae","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:19:10.738549-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wtf","title":"Layer 1: Sequence Complexity Overlay [X key]","description":"Layer 1 overlay (X key): Display Kolmogorov complexity (compression ratio) sparkline. Highlights HGT regions (high complexity, unusual composition), repetitive elements (low complexity). Uses pako gzip. Pedagogical: information theory, entropy. Priority: P1.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:10:40.550053-05:00","updated_at":"2025-12-06T23:21:51.220558-05:00","dependencies":[{"issue_id":"phage_explorer-wtf","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:10:40.5507-05:00","created_by":"daemon"}]}
